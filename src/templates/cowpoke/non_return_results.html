<div id="non_return_results">
    <div class="result-box" style="margin-top: 1em;">
        <h3>Mating Records</h3>
        <h2>{{ farm_name }}</h2>
        <h3>{{ first_insemination_date }} to {{ last_insemination_date }}</h3>
        <p>Herd Size: <b>{{ herd_size }}</b></p>
        <p>Total Cows Submitted: <b>{{ total_cows_submitted }}</b></p>
        <p>Total Inseminations: <b>{{ total_inseminations }}</b></p>
        <hr>
        <p>
        <table>
            <thead>
                <tr>
                    <th>Bull</th><th>Inseminations</th><th>% of Total</th>
                </tr>
            </thead>
            <tbody>
                {% for bull in bull_statistics %}
                    <tr>
                        <td style="text-align: left;">{{ bull.bull_name }}</td><td>{{ bull.count }}</td><td>{{ bull.pct }}%</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
        </p>
        <hr>
        <p>
        <h3 style="break-before: page;">Cow Submissions</h3>
            <table>
                <thead>
                    <tr><th></th><th>Per<br>Week</th><th>Cumulative</th><th>% of<br>Submissions</th><th>% of Herd</th><th>Target %</th></tr>
                </thead>
                <tbody>
                    <tr>
                        <td style="text-align: left;">Week 1</td>
                        <td>{{ cum_insem_stats.week_1_count }}</td>
                        <td>{{ cum_insem_stats.week_1_cum }}</td>
                        <td>{{ cum_insem_stats.week_1_cum_pct }}</td>
                        <td>{{ cum_insem_stats.week_1_pct_herd }}</td>
                        <td>30%</td>
                    </tr>
                    <tr>
                        <td style="text-align: left;">Week 2</td>
                        <td>{{ cum_insem_stats.week_2_count }}</td>
                        <td>{{ cum_insem_stats.week_2_cum }}</td>
                        <td>{{ cum_insem_stats.week_2_cum_pct }}</td>
                        <td>{{ cum_insem_stats.week_2_pct_herd }}</td>
                        <td>60%</td>
                    </tr>
                    <tr>
                        <td style="text-align: left;">Week 3</td>
                        <td>{{ cum_insem_stats.week_3_count }}</td>
                        <td>{{ cum_insem_stats.week_3_cum }}</td>
                        <td>{{ cum_insem_stats.week_3_cum_pct }}</td>
                        <td>{{ cum_insem_stats.week_3_pct_herd }}</td>
                        <td>90%</td>
                    </tr>
                </tbody>
            </table>
        </p>
        <p>
            <figure id="cow_submissions_chart">
                <img src="/cowpoke/nrr-images/cow-submissions-chart.svg?utcnow={{ utcnow }}"
                     alt="Cumulative Counts of Cow Submissions and Inseminations" />
            </figure>
        </p>
        <div class="delete_div_from_pdf">
            <hr>
        </div>
        <h3 style="break-before: page;">Non Return Rates</h3>
        <p>
            <table>
                <thead>
                    <tr><th></th><th>Six Weeks</th><th>Full Season</th><th>Full Season<br>Unconfirmed</th></tr>
                </thead>
                <tbody>
                    <tr>
                        <td style="text-align: left;">Analysis Start Date</td>
                        <td>{{ nrr.six_weeks_confirmed.start_date }}</td>
                        <td>{{ nrr.full_season_confirmed.start_date }}</td>
                        <td>{{ nrr.full_season_unconfirmed.start_date }}</td>
                    </tr>
                    <tr>
                        <td style="text-align: left;">Analysis Cut-Off Date</td>
                        <td>{{ nrr.six_weeks_confirmed.cutoff_date }}</td>
                        <td>{{ nrr.full_season_confirmed.cutoff_date }}</td>
                        <td>{{ nrr.full_season_unconfirmed.cutoff_date }}</td>
                    </tr>
                    <tr>
                        <td style="text-align: left;">Total Cows</td>
                        <td>{{ nrr.six_weeks_confirmed.total_cows }}</td>
                        <td>{{ nrr.full_season_confirmed.total_cows }}</td>
                        <td>{{ nrr.full_season_unconfirmed.total_cows }}</td>
                    </tr>
                    <tr>
                        <td style="text-align: left;">Excluded From Analysis</td>
                        <td>{{ nrr.six_weeks_confirmed.excluded_from_analysis }}</td>
                        <td>{{ nrr.full_season_confirmed.excluded_from_analysis }}</td>
                        <td>{{ nrr.full_season_unconfirmed.excluded_from_analysis }}</td>
                    </tr>
                    <tr>
                        <td style="text-align: left;">Eligible Cows</td>
                        <td><b>{{ nrr.six_weeks_confirmed.eligible_cows }}</b></td>
                        <td>{{ nrr.full_season_confirmed.eligible_cows }}</td>
                        <td>{{ nrr.full_season_unconfirmed.eligible_cows }}</td>
                    </tr>
                    <tr>
                        <td style="text-align: left;">Non-Returned Cows</td>
                        <td><b>{{ nrr.six_weeks_confirmed.non_return_cows }}</b></td>
                        <td>{{ nrr.full_season_confirmed.non_return_cows }}</td>
                        <td>{{ nrr.full_season_unconfirmed.non_return_cows }}</td>
                    </tr>
                    <tr>
                        <td style="text-align: left;">One-Day Returned Cows</td>
                        <td><b>{{ nrr.six_weeks_confirmed.one_day_return_cows }}</b></td>
                        <td>{{ nrr.full_season_confirmed.one_day_return_cows }}</td>
                        <td>{{ nrr.full_season_unconfirmed.one_day_return_cows }}</td>
                    </tr>
                    <tr>
                        <td style="text-align: left;">Returned Cows</td>
                        <td>{{ nrr.six_weeks_confirmed.returned_cows }}</td>
                        <td>{{ nrr.full_season_confirmed.returned_cows }}</td>
                        <td>{{ nrr.full_season_unconfirmed.returned_cows }}</td>
                    </tr>
                    <tr>
                        <td style="text-align: left;">Non Return Rate</td>
                        <td><b>{{ nrr.six_weeks_confirmed.non_return_rate }}%</b></td>
                        <td>{{ nrr.full_season_confirmed.non_return_rate }}%</td>
                        <td>{{ nrr.full_season_unconfirmed.non_return_rate }}%</td>
                    </tr>
                </tbody>
            </table>
        </p>
        <hr>
        <p>Total Returns: {{ rss.total_returns }}</p>
        <p>
            <table>
                <thead>
                    <tr><th></th><th>Number</th><th>% of Total</th><th></th></tr>
                </thead>
                <tbody>
                    <tr>
                        <td style="text-align: left;">First Inseminations</td>
                        <td>{{ rss.first_inseminations }}</td><td>{{ rss.first_insemination_rate }}%</td><td>("First Insemination Rate")</td>
                    </tr>
                    <tr>
                        <td style="text-align: left;">Total Returns</td>
                        <td>{{ rss.total_returns }}</td><td>{{ rss.total_return_rate }}%</td><td></td>
                    </tr>
                    <tr>
                        <td style="text-align: left;">Total Inseminations</td>
                        <td>{{ rss.total_inseminations }}</td><td>100%</td><td></td>
                    </tr>
                </tbody>
            </table>
        </p>
        <p>
        <table>
            <thead>
                <tr>
                    <th></th><th>Number</th><th>% of Total</th><th>% of Returns</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td style="text-align: left;">1 Day Returns</td><td>{{ rss.one_day_returns }}</td>
                    <td>{{ rss.one_day_returns_pct_total }}%</td><td>{{ rss.one_day_returns_pct_returns }}%</td>
                </tr>
                <tr>
                    <td style="text-align: left;">2-17 Day Returns</td><td>{{ rss.two_17_day_returns }}</td>
                    <td>{{ rss.two_17_day_returns_pct_total }}%</td><td>{{ rss.two_17_day_returns_pct_returns }}%</td>
                </tr>
                <tr>
                    <td style="text-align: left;">Normal Returns</td><td>{{ rss.normal_returns }}</td>
                    <td>{{ rss.normal_returns_pct_total }}%</td><td>{{ rss.normal_returns_pct_returns }}%</td>
                </tr>
                <tr>
                    <td style="text-align: left;">Long Returns</td><td>{{ rss.long_returns }}</td>
                    <td>{{ rss.long_returns_pct_total }}%</td><td>{{ rss.long_returns_pct_returns }}%</td>
                </tr>
            </tbody>
        </table>
        </p>
        <p>
            <figure id="return_days_bar_chart">
                <img src="/cowpoke/nrr-images/return-days-bar-chart.svg?utcnow={{ utcnow }}"
                     alt="Counts of returns by days elapsed" />
            </figure>
        </p>
    </div>
    <div class="delete_div_from_pdf">
        <p>
        <a href="/cowpoke/nrr-download?utcnow={{ utcnow }}" download>Download Mating With Returns CSV File</a>
        </p>
        <p>
        <a href="/cowpoke/mating-report-download?utcnow={{ utcnow }}" download>
            Generate and Download Mating Report as PDF
        </a>
        </p>
    </div>
</div>
